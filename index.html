<!DOCTYPE html>

<head>
    <title>Thiên Môn | Tiểu Thuyết | Đọc Sách Online Mỗi Ngày</title>
    <meta name="keywords" th:content="${application.website.keyword}"/>
    <meta name="description"
          th:content="${application.website.description}"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <link href="favicon.ico" type="image/x-icon" rel="shortcut icon"/>
    <link href="favicon.ico" type="image/x-icon" rel="Bookmark"/>
    <link rel="stylesheet" href="/css/main.css"/>
    <link rel="stylesheet" href="/css/base.css?v=1"/>
</head>
<body>

<!-- Bắt Đầu Menu Seach-->
    <div th:fragment="top(navType)" class="header">
        <div class="topBar" style="display: none">
            <div class="box_center cf">
                <div class="top_l">
                    <a href="/" class="on" th:text="${application.website.name}"></a><i class="line">|</i><a
                        href="/?m=2">手机女生版</a><i class="line">|</i><a
                        href="/?m=1">手机男生版</a><i class="line">|</i><a
                        href="/">客户端下载</a>
                </div>
                <div class="top_r">
                    <div class="top_nearread">
                        <a href="javascript:void(0);" class="nearread" id="headerUserHistoryBtn">最近阅读<i
                                class="icon_down"></i></a>
                        <div class="book_record" style="display:none" id="headerUserHistory">
                        </div>
                    </div>
                    <span>
                    </span>
                </div>
            </div>
        </div>
        <div class="topMain">
            <div class="box_center cf">
                <a href="/?m=2" class="logo fl"><img src="/images/logo.png" th:alt="${application.website.name}"/></a>
                <div class="searchBar fl">
                    <div class="search cf">
                        <input type="text" placeholder="Từ khóa、Tác Giả、Thể Loại" class="s_int" name="searchKey" id="searchKey"/>
                        <label class="search_btn" id="btnSearch" onclick="searchByK()"><i class="icon"></i></label>
                    </div>
                </div>
                <div class="bookShelf fr" id="headerUserInfo">
                    <a class="sj_link" href="/user/favorites.html">Truyện Của Tôi</a>
                    <span class="user_link"><i class="line mr0">|</i><a href="/user/login.html" class="mr5">Đăng Nhập</a><a
                            href="/user/register.html">Đăng ký</a></span>
                </div>
            </div>
        </div>

        <!--  Bắt Đầu Thanh MeNu -->
        <div class="mainNav" id="mainNav" th:style="${navType} == 10?'display:none':''">
            <div class="box_center cf" >
                <ul class="nav" id="navModule">
    
                    <li th:class="${navType}==0?'on':''"><a href="/">Trang Chủ </a></li>
                    <li th:class="${navType}==1?'on':''"><a href="/book/bookclass.html">Danh Sách Truyện</a></li>
                    <li th:class="${navType}==2?'on':''"><a href="/book/book_ranking.html">Bảng Xếp Hạng</a></li>
                    <li class=""><a href="/pay/index.html">Nạp Thẻ </a></li>
                    <li><a href="/author/index.html" target="_blank">Khu Vực Tác Giả</a></li>
    
                </ul>
            </div>
        </div>
        <!-- Kết Thúc Thanh Me Nu-->
    </div>
<!-- Kết Thúc MeNu Seach-->

<div class="main box_center cf">
    <div class="container box-center">
        <!-- Baner slide -->
        <div class="banner">
          <div class="banner-box">
            <ul>
              <li>
                <a href="#" class="show">
                  <img src="./images/banner_2.jpg" />
                </a>
                <a href="#" class="hidden">
                  <img src="./images/banner_3.jpg" />
                </a>
                <a href="#" class="hidden">
                  <img src="./images/banner_1.jpg" />
                </a>
                <a href="#" class="hidden">
                  <img src="./images/banner_4.jpg" />
                </a>
                <a href="#" class="hidden">
                  <img src="./images/banner_5.jpg" />
                </a>
              </li>
            </ul>
            <div class="banner-menu"></div>
          </div>
        </div>
        <!--Kết Thúc baner-->
    <div class="channelWrap channelBanner cf">
        <div class="leftBox">
            <div class="sliderContent">
                <dl class="scBigImg" id="carouseBig" th:if="${bookMap['0']}" >
                    <dd th:each="book,iterStat : ${bookMap['0']}" th:class="${iterStat.first}? 'on'"><a th:href="'/book/'+${book.bookId}+'.html'">
                        <img th:src="${book.picUrl}" th:alt="${book.bookName}"/></a></dd>
                </dl>
                <div class="scSmallImg" id="carouseSmall" >
                    <ul th:if="${bookMap['0']}">
                        <li th:each="book,iterStat : ${bookMap['0']}" th:class="${iterStat.first}? 'on'">
                        <img th:src="${book.picUrl}" th:alt="${book.bookName}"/></li>
                    </ul>
                </div>
            </div>
            <div class="hot_articles">
                <dl class="hot_recommend" id="topBooks1" th:if="${bookMap['1']} and ${#lists.size(bookMap['1']) > 0}">
                    <dt><a th:href="'/book/'+${bookMap['1'][0].bookId}+'.html'" th:text="${bookMap['1'][0].bookName}"></a></dt>
                    <dd th:if="${#lists.size(bookMap['1']) > 1}"><a th:href="'/book/'+${bookMap['1'][1].bookId}+'.html'" th:text="${bookMap['1'][1].bookName}"></a><a th:if="${#lists.size(bookMap['1']) > 2}" th:href="'/book/'+${bookMap['1'][1].bookId}+'.html'" th:text="${bookMap['1'][1].bookName}"></a></dd>
                    <dd th:if="${#lists.size(bookMap['1']) > 3}"><a th:href="'/book/'+${bookMap['1'][3].bookId}+'.html'" th:text="${bookMap['1'][3].bookName}"></a><a th:if="${#lists.size(bookMap['1']) > 4}" th:href="'/book/'+${bookMap['1'][4].bookId}+'.html'" th:text="${bookMap['1'][4].bookName}"></a></dd>
                </dl>
                <dl class="hot_recommend" id="topBooks2" th:if="${bookMap['1']} and ${#lists.size(bookMap['1']) > 5}">
                    <dt><a th:href="'/book/'+${bookMap['1'][5].bookId}+'.html'" th:text="${bookMap['1'][5].bookName}"></a></dt>
                    <dd th:if="${#lists.size(bookMap['1']) > 6}"><a th:href="'/book/'+${bookMap['1'][6].bookId}+'.html'" th:text="${bookMap['1'][6].bookName}"></a><a th:if="${#lists.size(bookMap['1']) > 7}" th:href="'/book/'+${bookMap['1'][7].bookId}+'.html'" th:text="${bookMap['1'][7].bookName}"></a></dd>
                    <dd th:if="${#lists.size(bookMap['1']) > 8}"><a th:href="'/book/'+${bookMap['1'][8].bookId}+'.html'" th:text="${bookMap['1'][8].bookName}"></a><a th:if="${#lists.size(bookMap['1']) > 9}" th:href="'/book/'+${bookMap['1'][9].bookId}+'.html'" th:text="${bookMap['1'][9].bookName}"></a></dd>
                </dl>

                <dl class="hot_notice" id="indexNews">
                    <dd style="text-align:left;" th:each="news : ${newsList}"><span th:text="'['+${news.catName}+']'"></span><a th:href="'/about/newsInfo-'+${news.id}+'.html'" th:utext="${news.title}"></a>
                    </dd>

                </dl>
            </div>
        </div>
        <div class="rightBox">
            <div class="title cf" id="weekcommend">
                <h3>Bảng Xếp Hạng Tuần</h3>
            </div>
            <div class="rightList">
                <ul id="currentWeek" th:if="${bookMap['2']}">
                    <li th:each="book,iterStat : ${bookMap['2']}"  th:class="${iterStat.first}? 'on num1': (${iterStat.index < 3}? 'num'+${iterStat.index+1})">
                        <div class="book_name"><i th:text="${iterStat.index+1}"></i><a class="name" th:href="'/book/'+${book.bookId}+'.html'" th:text="${book.bookName}"></a></div>
                        <div class="book_intro">
                            <div class="cover"><a th:href="'/book/'+${book.bookId}+'.html'"><img th:src="${book.picUrl}" th:alt="${book.bookName}"></a>
                            </div>
                            <a class="txt" th:href="'/book/'+${book.bookId}+'.html'" th:utext="${book.bookDesc}"></a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="channelWrap channelPic cf">
        <div class="leftBox">
            <div class="title">
                <h2 class="on"> Top Đề Cử  </h2>
            </div>
            <div class="picRecommend cf" id="hotRecBooks" th:if="${bookMap['3']}">
                <div class="itemsList" th:each="book : ${bookMap['3']}">
                    <a class="items_img" th:href="'/book/'+${book.bookId}+'.html'">
                        <img class="lazyload" src="/images/default.gif" th:data-src="${book.picUrl}" th:alt="${book.bookName}">
                    </a>
                    <div class="items_txt">
                        <h4><a th:href="'/book/'+${book.bookId}+'.html'" th:text="${book.bookName}"></a></h4>
                        <p class="author"><a href="javascript:void(0)" th:text="'作者：'+${book.authorName}"></a></p>
                        <p class="intro"><a th:href="'/book/'+${book.bookId}+'.html'" th:utext="${book.bookDesc}"></a>
                        </p>
                    </div>
                </div>

            </div>
        </div>
        <div id="bookrank1_ShowBookRank">
            <div class="rightBox ">
                <div class="title cf">
                    <h3 class="on">Truyện Truy Cập Cao</h3>
                </div>
                <div class="rightList">
                    <ul id="clickRankBooks">


                    </ul>
                    <div class="more"><a href="/book/book_ranking.html">Xem Thêm &gt;</a></div>
                </div>
            </div>
        </div>
    </div>
    <div class="channelWrap channelPic cf">
        <div class="leftBox">
            <div class="title">
                <h2>Biên Tập Viên Đề Cử</h2>
            </div>
            <div class="picRecommend cf" id="classicBooks" th:if="${bookMap['4']}">
                <div class="itemsList" th:each="book : ${bookMap['4']}">
                    <a class="items_img" th:href="'/book/'+${book.bookId}+'.html'">
                        <img class="lazyload" src="/images/default.gif" th:data-src="${book.picUrl}" th:alt="${book.bookName}">
                    </a>
                    <div class="items_txt">
                        <h4><a th:href="'/book/'+${book.bookId}+'.html'" th:text="${book.bookName}"></a></h4>
                        <p class="author"><a href="javascript:void(0)" th:text="'作者：'+${book.authorName}"></a></p>
                        <p class="intro"><a th:href="'/book/'+${book.bookId}+'.html'" th:utext="${book.bookDesc}"></a>
                        </p>
                    </div>
                </div>

            </div>
        </div>
        <div id="bookrank2_ShowBookRank">
            <div class="rightBox ">
                <div class="title cf">
                    <h3 class="on">Truyện Mới!</h3>
                </div>
                <div class="rightList">
                    <ul id="newRankBooks">


                    </ul>
                    <div class="more"><a href="/book/book_ranking.html?type=1">Xem Thêm &gt;</a></div>
                </div>
            </div>
        </div>
    </div>
    <div class="channelWrap channelTable cf">
        <div class="leftBox">
            <div class="title">
                <h2>Truyện Mới Cập Nhật</h2>
            </div>
            <div class="updateTable">
                <table cellpadding="0" cellspacing="0">
                    <thead>
                    <tr>
                        <th class="style">Thể Loại</th>
                        <th class="name">Tên</th>
                        <th class="chapter">Số Chương</th>
                        <th class="author">Tác Giả</th>
                        <th class="time">Thời Gian Cập Nhật</th>
                    </tr>
                    </thead>
                    <tbody id="newRankBooks2">


                    </tbody>
                </table>
            </div>
        </div>
        <div id="bookrank5_ShowBookRank">
            <div class="rightBox mb20">
                <div class="title cf">
                    <h3 class="on">更新榜单</h3>
                </div>
                <div class="rightList">
                    <ul id="updateRankBooks">


                    </ul>
                    <div class="more"><a href="/book/book_ranking.html?type=2">Xem Thêm &gt;</a></div>
                </div>
            </div>
        </div>

    </div>
</div>
<div class="friend_link">
    <div class="box_center cf" id="friendLink">
        <span>Liên Kết ：</span>
    </div>
</div>

<!--  Chân Trang Nè  -->
<div th:fragment="footer" class="footer">
    <div class="box_center cf">
        <div class="copyright">
            <ul >
                <li class="menu"><a href="/?to=mobile">Phiên Bản Di Động</a><i class="line">|</i><a href="/">Trang Chủ </a><i class="line">|</i><a href="/about/default.html" >Thông Tin </a><i class="line">|</i><a href="/about/contact.html" >Liên Hệ </a><i class="line">|</i><a href="/user/feedback.html" >Phản Hồi</a><i class="line">|</i><a href="/author/index.html" >Khu Vực Nhà Văn</a><i class="line">|</i><a href="/mobile/fiction_house.apk" >Khách Hàng </a></li>
                <li th:text="'Copyright (C) '+${application.website.domain}+' All rights reserved&nbsp;&nbsp;'+${application.website.name}+'版权所有'"></li>

            </ul>
        </div>
    </div>
</div>
<!-- Kết Thúc Chân Trang-->

</body>
<!-- phần JS cuối Trang -->
<script th:fragment="js" src="/javascript/jquery-1.8.0.min.js" type="text/javascript"></script>
<script th:fragment="js" src="/layui/layui.all.js" type="text/javascript"></script>
<script th:fragment="js" src="/javascript/header.js" type="text/javascript"></script>
<script th:fragment="js" src="/javascript/common.js" type="text/javascript"></script>
<script src="/javascript/lazyload.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
    var $div = $('.scBigImg dl');//Bìa Truyện Đề Xuất Lớn
    var $nav = $('.scSmallImg li');//Bìa Truyện Đề Xuất Nhỏ 
    var num = -1;
    var open;

    function changeKv() {
        if (num >= $nav.length - 1) {
            num = 0;
        } else {
            num++;
        }
        $nav.eq(num).trigger('mouseenter');
        open = setTimeout(changeKv, 3000);
    }

    changeKv();
    $nav.each(function (index) {
        $(this).off('mouseenter').on('mouseenter', function () {
            clearTimeout(open);

            $(this).addClass('on').siblings().removeClass('on');
            $('.scBigImg dd').eq(index).addClass('on').siblings().removeClass('on');
            $('.scSmallImg').off('mouseleave').on('mouseleave', function () {
                num = index;
                setTimeout(function () {
                    changeKv();
                }, 3000)
            })
        });
    });
    $div.each(function () {
        $(this).off('mouseenter').on('mouseenter', function () {
            clearTimeout(open);
        });
    });

    lazyload();
    $(function () {

        //Click Vào Truy Vấn Dữ Liệu Danh Sách 
        $.ajax({
            type: "get",
            url: "/book/listClickRank",
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.code == 200) {
                    var clickRankBooks = data.data;
                    var clickRankBooksHtml = "";
                    for (var i = 0; i < clickRankBooks.length; i++) {
                        var clickRankBook = clickRankBooks[i];
                        var classHtml = "";
                        var imageHtml = "";
                        if (i == 0) {
                            classHtml = "on";
                            imageHtml = "<img src=\"" + clickRankBook.picUrl + "\" alt=\"" + clickRankBook.bookName + "\"/>";
                        }
                        if (i < 3) {
                            classHtml += (" num" + (i + 1));
                        }
                        clickRankBooksHtml += ("<li class=\"" + classHtml + "\">\n" +
                            "                            <div class=\"book_name\">\n" +
                            "                                <i>" + (i + 1) + "</i><a class=\"name\" href=\"/book/" + clickRankBook.id + ".html\">" + clickRankBook.bookName + "</a>\n" +
                            "                            </div>\n" +
                            "                            <div class=\"book_intro\">\n" +
                            "                                <div class=\"cover\">\n" +
                            "                                    <a href=\"book/" + clickRankBook.id + ".html\">"+ imageHtml +"</a>\n" +
                            "                                </div>\n" +
                            "                                <a class=\"txt\" href=\"/book/" + clickRankBook.id + ".html\">" + clickRankBook.bookDesc + "</a>\n" +
                            "                            </div>\n" +
                            "\n" +
                            "                        </li>");
                    }
                    $("#clickRankBooks").html(clickRankBooksHtml);
                } else {
                    layer.alert(data.msg);
                }

            },
            error: function () {
                layer.alert('Mất Kết Nối');
            }
        })
        //Truy Vấn Danh Sách Mới 
        $.ajax({
            type: "get",
            url: "/book/listNewRank",
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.code == 200) {
                    var newRankBooks = data.data;
                    var newRankBooksHtml = "";
                    for (var i = 0; i < newRankBooks.length; i++) {
                        var newRankBook = newRankBooks[i];
                        var classHtml = "";
                        var imageHtml = "";
                        if (i == 0) {
                            classHtml = "on";
                            imageHtml = "<img src=\"" + newRankBook.picUrl + "\" alt=\"" + newRankBook.bookName + "\"/>";
                        }
                        if (i < 3) {
                            classHtml += (" num" + (i + 1));
                        }
                        newRankBooksHtml += ("<li class=\"" + classHtml + "\">\n" +
                            "                            <div class=\"book_name\">\n" +
                            "                                <i>" + (i + 1) + "</i><a class=\"name\" href=\"/book/" + newRankBook.id + ".html\">" + newRankBook.bookName + "</a>\n" +
                            "                            </div>\n" +
                            "                            <div class=\"book_intro\">\n" +
                            "                                <div class=\"cover\">\n" +
                            "                                    <a href=\"book/" + newRankBook.id + ".html\">" + imageHtml + "</a>\n" +
                            "                                </div>\n" +
                            "                                <a class=\"txt\" href=\"/book/" + newRankBook.id + ".html\">" + newRankBook.bookDesc + "</a>\n" +
                            "                            </div>\n" +
                            "\n" +
                            "                        </li>");
                    }
                    $("#newRankBooks").html(newRankBooksHtml);
                } else {
                    layer.alert(data.msg);
                }

            },
            error: function () {
                layer.alert('Mất Kết Nối');
            }
        })
        //Cập Nhật Truy Vấn Danh Sách
        $.ajax({
            type: "get",
            url: "/book/listUpdateRank",
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.code == 200) {
                    var updateRankBooks = data.data;
                    var updateRankBookHtml = "";
                    var updateRankBookHtml2 = "";
                    for (var i = 0; i < updateRankBooks.length; i++) {
                        var updateRankBook = updateRankBooks[i];
                        var classHtml = "";
                        var imageHtml = "";
                        if (i == 0) {
                            classHtml = "on";
                            imageHtml = "<img\ src=\"" + updateRankBook.picUrl + "\" alt=\"" + updateRankBook.bookName + "\"/>";
                        }
                        if (i < 3) {
                            classHtml += (" num" + (i + 1));
                        }
                        if (i < 10) {
                            updateRankBookHtml += ("<li class=\"" + classHtml + "\">\n" +
                                "                            <div class=\"book_name\">\n" +
                                "                                <i>" + (i + 1) + "</i><a class=\"name\" href=\"/book/" + updateRankBook.id + ".html\">" + updateRankBook.bookName + "</a>\n" +
                                "                            </div>\n" +
                                "                            <div class=\"book_intro\">\n" +
                                "                                <div class=\"cover\">\n" +
                                "                                    <a href=\"book/" + updateRankBook.id + ".html\">" + imageHtml + "</a>\n" +
                                "                                </div>\n" +
                                "                                <a class=\"txt\" href=\"/book/" + updateRankBook.id + ".html\">" + updateRankBook.bookDesc + "</a>\n" +
                                "                            </div>\n" +
                                "\n" +
                                "                        </li>");
                        }
                        updateRankBookHtml2 += ("<tr>\n" +
                            "                        <td class=\"style\"><a href=\"book/bookclass.html?c=" + updateRankBook.catId + "\">[" + updateRankBook.catName + "]</a></td>\n" +
                            "                        <td class=\"name\"><a href=\"/book/" + updateRankBook.id + ".html\">" + updateRankBook.bookName + "</a></td>\n" +
                            "                        <td class=\"chapter\"><a href=\"/book/" + updateRankBook.id + ".html\">" + updateRankBook.lastIndexName + "</a>\n" +
                            "                            <i class=\"\"></i>\n" +
                            "                        </td>\n" +
                            "                        <td class=\"author\"><a href=\"javascript:void(0)\">" + updateRankBook.authorName + "</a></td>\n" +
                            "                        <td class=\"time\">" + updateRankBook.lastIndexUpdateTime + "</td>\n" +
                            "                    </tr>");
                    }
                    $("#updateRankBooks").html(updateRankBookHtml);
                    $("#newRankBooks2").html(updateRankBookHtml2);
                } else {
                    layer.alert(data.msg);
                }

            }
            ,
            error: function () {
                layer.alert('Mất Kết Nối');
            }
        })
        //Truy Vấn Liên Kết
        $.ajax({
            type: "get",
            url: "/friendLink/listIndexLink",
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.code == 200) {
                    var friendLinkList = data.data;
                    var friendLinkHtml = "";
                    for (var i = 0; i < friendLinkList.length; i++) {
                        var friendLink = friendLinkList[i];
                        friendLinkHtml += ("<a target='_blank' href=\"" + friendLink.linkUrl + "\">" + friendLink.linkName + "</a>");
                    }
                    $("#friendLink").append(friendLinkHtml);
                } else {
                    layer.alert(data.msg);
                }

            },
            error: function () {
                layer.alert('Mất Kết Nối');
            }
        })
        $("#weekcommend h3").mouseover(function () {
            $("#weekcommend h3").removeClass("on");
            $(this).addClass("on");
            if ($(this).attr("class").indexOf("fr") >= 0) {
                $("#currentWeek").hide();
                $("#currentPreWeek").show();
            } else {
                $("#currentPreWeek").hide();
                $("#currentWeek").show();
            }
        });
        // baner slide
        var banners = $(".banner .banner-box ul>li a");
        var index = 0;
        function play() {
        index++;
        if (index == 5) {
            index = 0;
        }
        for (let i = 0; i <= banners.length; i++) {
            if (i == index) {
            banners.eq(i).attr("class", "show");
            } else {
            banners.eq(i).attr("class", "hidden");
            }
        }
        }
        var timer = setInterval(play, 2000);
        $(".banner .banner-box ul>li").mouseover(function () {
        clearInterval(timer);
        });
        $(".banner .banner-box ul>li").mouseout(function () {
        timer = setInterval(play, 2000);
        });

        // Thời gian ViP
        var freetime = $(".free-time .timing-block p.time");
        function addZero(i) {
        return i <= 9 ? "0" + i : i;
        }
        function timing() {
        var nowtime = new Date();
        var endtime = new Date("2020/07/11,00:00:00");
        var time = parseInt(endtime.getTime() - nowtime.getTime());
        var days = parseInt(time / 1000 / 60 / 60 / 24);
        var hours = parseInt((time / 1000 / 60 / 60) % 24);
        var minutes = parseInt((time / 1000 / 60) % 60);
        var seconds = parseInt((time / 1000) % 60);
        freetime.text(
            days +
            "天" +
            addZero(hours) +
            ":" +
            addZero(minutes) +
            ":" +
            addZero(seconds)
        );
        // Sự Khác Biệt Hai Mốc Thời gian <0 Kết Thúc
        if (time <= 0) {
            $(".free-time").hide();
            // clearTimeout(timer);
            return;
        }
        var timer = setTimeout(timing, 1000);
        }
    });
</script>
</html>